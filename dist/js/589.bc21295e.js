"use strict";(self["webpackChunkse_project"]=self["webpackChunkse_project"]||[]).push([[589],{4589:function(s,e,t){t.r(e),t.d(e,{default:function(){return l}});var i=function(){var s=this,e=s.$createElement,i=s._self._c||e;return i("div",[i("Header",{attrs:{id:"header"}}),i("img",{attrs:{id:"bg",src:t(9122)}}),i("div",{attrs:{id:"Border"}},[s._m(0),i("h1",{staticClass:"sqTitle"},[s._v("密保问题验证")]),i("div",{staticClass:"verifyBox"},[i("button",{attrs:{id:"getQuest"},on:{click:s.GetQuestion}},[s._v("获取密保问题")]),i("div",{staticClass:"inputBox"},[i("img",{staticClass:"icon",attrs:{src:t(2891),alt:"email_icon"}}),i("input",{directives:[{name:"model",rawName:"v-model",value:s.username,expression:"username"}],attrs:{type:"text",placeholder:"输入用户名"},domProps:{value:s.username},on:{input:function(e){e.target.composing||(s.username=e.target.value)}}})]),i("div",{staticClass:"inputBox"},[i("img",{staticClass:"icon",attrs:{src:t(8347),alt:"question_icon"}}),i("span",{attrs:{id:"sQuestion"}},[s._v(s._s(s.sQuestion))])]),s.isCorrect?i("div",{staticClass:"inputBox"},[i("img",{staticClass:"icon",attrs:{src:t(3101),alt:"answer_icon"}}),i("input",{directives:[{name:"model",rawName:"v-model",value:s.sAnswer,expression:"sAnswer"}],attrs:{type:"text",placeholder:"输入密保答案"},domProps:{value:s.sAnswer},on:{input:function(e){e.target.composing||(s.sAnswer=e.target.value)}}})]):s._e(),s.isCorrect?i("div",{staticClass:"inputBox"},[i("img",{staticClass:"icon",attrs:{src:t(9552),alt:"key_icon"}}),i("input",{directives:[{name:"model",rawName:"v-model",value:s.password1,expression:"password1"}],attrs:{type:"password",placeholder:"输入新密码"},domProps:{value:s.password1},on:{input:function(e){e.target.composing||(s.password1=e.target.value)}}})]):s._e(),s.isCorrect?i("div",{staticClass:"inputBox"},[i("img",{staticClass:"icon",attrs:{src:t(9552),alt:"key_icon"}}),i("input",{directives:[{name:"model",rawName:"v-model",value:s.password2,expression:"password2"}],attrs:{type:"password",placeholder:"重新输入新密码"},domProps:{value:s.password2},on:{input:function(e){e.target.composing||(s.password2=e.target.value)}}})]):s._e(),i("div",{staticClass:"changeLoginWay"},[i("button",{on:{click:s.EmailVerify}},[s._v("邮箱验证")]),i("span",{staticClass:"symbol"},[s._v("|")]),i("button",{on:{click:s.Login}},[s._v("回到登录")]),i("span",{staticClass:"symbol"},[s._v("|")]),i("button",{on:{click:s.RegisterNow}},[s._v("立即注册")])]),i("button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:s.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"submit"},on:{click:s.Submit}},[s._v("确定设置")])])])],1)},a=[function(){var s=this,e=s.$createElement,i=s._self._c||e;return i("div",{attrs:{id:"logo"}},[i("img",{attrs:{src:t(6949)}})])}],o=t(3083),n={name:"SQVerify",components:{Header:o.Z},data(){return{username:"",sQuestion:"",sQuestionNum:0,sAnswer:"",password1:"",password2:"",isCorrect:!1,fullscreenLoading:!1}},methods:{EmailVerify(){this.$router.push("/emailverify")},Login(){this.$router.push("/login")},RegisterNow(){this.$router.push("/register")},Submit(){if(""==this.username||""==this.password1||""==this.password2||""==this.sAnswer)return void this.$message.warning("请填写所有空格");this.fullscreenLoading=!0;const s=new FormData;s.append("username",this.username),s.append("newpassword",this.password1),s.append("newpassword2",this.password2),s.append("securityQuestion",this.sQuestionNum),s.append("securityAnswer",this.sAnswer),this.$axios({method:"put",url:"/api/v1/auth/resetpwd/question/",data:s}).then((s=>{console.log(s),this.fullscreenLoading=!1,this.$message.success("设置成功！快用新密码登录吧~"),this.$router.push({path:"/login"})})).catch((s=>{switch(console.log(s),s.response.data.message){case"Password not match.":this.$message.warning("新密码和重复新密码不匹配");break;case"Password too simple.":this.$message.warning("密码需包含字母、数字及符号且字符数>=8");break;default:this.$message.warning("重置失败！")}}))},GetQuestion(){""!=this.username?this.$axios({method:"get",url:"/api/v1/auth/requestquestion/?username="+this.username}).then((s=>{switch(console.log(s),this.isCorrect=!0,s.data.securityQuestion){case 1:this.sQuestion="您最喜欢的颜色是？",this.sQuestionNum=1,console.log("THIS IS 1");break;case 2:this.sQuestion="您最讨厌的食物？",console.log("THIS IS 2"),this.sQuestionNum=2;break;case 3:this.sQuestion="您的最要好闺蜜/兄弟是？",console.log("THIS IS 3"),this.sQuestionNum=3;break;case 4:this.sQuestion="您的爱好是？",console.log("THIS IS 4"),this.sQuestionNum=4;break;case 5:this.sQuestion="您的初恋是？",console.log("THIS IS 5"),this.sQuestionNum=5;break}})).catch((s=>{console.log(s),this.$message.warning("用户名不存在")})):this.$message.warning("用户名不可为空")}}},r=n,c=t(1001),u=(0,c.Z)(r,i,a,!1,null,"3aae3877",null),l=u.exports},3101:function(s,e,t){s.exports=t.p+"img/Check.ff5b3165.svg"},9552:function(s,e,t){s.exports=t.p+"img/Key.aec0a518.svg"},8347:function(s,e,t){s.exports=t.p+"img/Question.0733a2d3.svg"},2891:function(s,e,t){s.exports=t.p+"img/Usericon.d11af7d5.svg"},9122:function(s,e,t){s.exports=t.p+"img/background.cc6328a5.jpg"}}]);
//# sourceMappingURL=589.bc21295e.js.map