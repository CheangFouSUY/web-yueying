"use strict";(self["webpackChunkse_project"]=self["webpackChunkse_project"]||[]).push([[762],{2762:function(e,t,s){s.r(t),s.d(t,{default:function(){return m}});var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("Header",{attrs:{id:"header"}}),r("img",{style:{height:e.bgHeight+"px"},attrs:{id:"bg",src:s(9122)}}),r("div",{staticClass:"info"},[e._m(0),r("div",{staticClass:"inputBox"},[r("img",{staticClass:"icon",attrs:{src:s(5153),alt:"email_icon"}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.username,expression:"form.username"}],attrs:{type:"text",placeholder:"请输入用户名或邮箱"},domProps:{value:e.form.username},on:{input:function(t){t.target.composing||e.$set(e.form,"username",t.target.value)}}})]),r("div",{staticClass:"inputBox"},[r("img",{staticClass:"icon",attrs:{src:s(1604),alt:"password_icon"}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:e.form.password},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.Login.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}})]),r("div",{staticClass:"ForgetnRegister"},[r("span",{on:{click:e.ForgetPw}},[e._v("忘记密码")]),r("span",{attrs:{id:"symbol"}},[e._v("|")]),r("span",{on:{click:e.RegisterNow}},[e._v("立即注册")])]),r("button",{on:{click:e.Login}},[e._v("登录")])])],1)},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"logo"}},[r("img",{attrs:{src:s(6949)}})])}],o=s(3083),i=s(3445),n={name:"Login",components:{Header:o.Z,Footer:i.Z},data(){return{form:{username:"",password:""},bgHeight:""}},mounted(){this.bgHeight=document.documentElement.clientHeight-$("#header").outerHeight(!0)-1},methods:{ForgetPw(){this.$router.push("/emailverify")},RegisterNow(){this.$router.push("/register")},async Login(){if(""==this.form.username||""==this.form.password)return void this.$message.warning("邮箱/用户名和密码不可为空");const e=new FormData;e.append("username",this.form.username),e.append("password",this.form.password),await this.$axios({method:"post",url:"/api/v1/auth/login/",data:e}).then((e=>{switch(console.log(e),e.status){case 200:console.log(e.status),localStorage.setItem("token",e.data.tokens.access),this.$message.success("登录成功！"),this.$store.dispatch("saveUserInfo",{user:{username:e.data.username,confirmed:!0,id:e.data.id,profilePic:e.data.profile}});const t=localStorage.getItem("preRoute");setTimeout((()=>{null==t||"/register"===t?this.$router.push("/"):this.$router.push({path:t})}),500);break}})).catch((e=>{console.log(e),this.$message.warning("用户名/邮箱不存在或密码错误")}))}}},c=n,u=s(1001),l=(0,u.Z)(c,r,a,!1,null,"926cc30c",null),m=l.exports},5153:function(e,t,s){e.exports=s.p+"img/Email.5e14ee3f.svg"},1604:function(e,t,s){e.exports=s.p+"img/Password.d253a656.svg"},9122:function(e,t,s){e.exports=s.p+"img/background.cc6328a5.jpg"}}]);
//# sourceMappingURL=762.acbb8876.js.map