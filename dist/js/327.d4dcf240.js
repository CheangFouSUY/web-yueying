"use strict";(self["webpackChunkse_project"]=self["webpackChunkse_project"]||[]).push([[327],{8327:function(t,e,o){o.r(e),o.d(e,{default:function(){return h}});var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"report"},[o("Header",{attrs:{id:"header"}}),o("div",{style:{"min-height":t.mainMinHeight+"px"},attrs:{id:"main"}},[o("div",{staticClass:"name"},[o("el-row",[o("span",{attrs:{id:"namespan"}},[t._v("举报者姓名 :")]),o("span",{attrs:{id:"name"}},[t._v(t._s(t.Report.reporter))])]),o("el-row",[o("span",{attrs:{id:"conspan"}},[t._v("  举报内容  :")]),o("span",{attrs:{id:"con"}},[t._v("["+t._s(t.Report.getreport)+"] "+t._s(t.Report.con))])])],1),o("div",{staticClass:"content"},[o("div",[o("span",[t._v("举报标题 :")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.Report.title,expression:"Report.title"}],attrs:{type:"text",placeholder:"举报标题"},domProps:{value:t.Report.title},on:{input:function(e){e.target.composing||t.$set(t.Report,"title",e.target.value)}}})]),o("div",[o("span",[t._v("举报类型 :")]),o("select",{directives:[{name:"model",rawName:"v-model",value:t.Report.type,expression:"Report.type"}],attrs:{id:"reportType",name:"reportType"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.Report,"type",e.target.multiple?o:o[0])}}},[o("option",{staticStyle:{display:"none"}}),o("option",{attrs:{value:"1"}},[t._v("垃圾内容")]),o("option",{attrs:{value:"2"}},[t._v("色情内容")]),o("option",{attrs:{value:"3"}},[t._v("非法活动")]),o("option",{attrs:{value:"4"}},[t._v("侵犯版权")]),o("option",{attrs:{value:"5"}},[t._v("骚扰、欺凌和威胁")]),o("option",{attrs:{value:"6"}},[t._v("仇恨言论")]),o("option",{attrs:{value:"7"}},[t._v("暴力内容")])])]),o("div",{staticClass:"concontent"},[o("span",[t._v("举报详情 :")]),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.Report.content,expression:"Report.content"}],attrs:{id:"content",name:"content",placeholder:"请输入举报详情(不少于15字符)"},domProps:{value:t.Report.content},on:{input:function(e){e.target.composing||t.$set(t.Report,"content",e.target.value)}}})]),o("button",{on:{click:function(e){return t.Submit()}}},[t._v("提交")])])]),o("Footer",{attrs:{id:"footer"}})],1)},i=[],a=o(3083),s=o(3445),n=o(2282),p={components:{Header:a.Z,Footer:s.Z,User:n.Z},mounted(){var t;(t=n.Z.getters.getUser(n.Z.state()))&&(this.islogin=!0,this.Report.reporterId=t.user.id,this.getName()),this.getDetail(),this.mainMinHeight=document.documentElement.clientHeight-$("#header").outerHeight(!0)-$("#footer").outerHeight(!0)-6},methods:{Submit(){if(!this.Report.title)return void this.$notify({showClose:!0,message:"标题不可为空！",type:"warning",position:"top-left"});if(this.Report.content.length<15)return void this.$notify({showClose:!0,message:"举报详情字符字数不得少于15",type:"warning",position:"top-left"});let t=new FormData;t.append("title",this.Report.title),t.append("description",this.Report.content),t.append("category",this.Report.type),this.Report.isFeed?t.append("reportFeed",this.Report.feedId):t.append("reportReview",this.Report.reviewId);var e={};localStorage.getItem("token")&&(e={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"post",url:"/api/v1/report/",data:t,headers:e}).then((t=>{console.log(t),this.$message({showClose:!0,message:"提交成功，感谢您的举报！",type:"success"}),this.$router.push("/")})).catch((t=>{console.log(t)}))},async getDetail(){var t=this.$route.params.id.split("&");"f"==t[0]?(this.Report.isFeed=!0,await this.$axios({method:"get",url:"/api/v1/feed/"+t[1]}).then((e=>{this.Report.feedId=t[1],this.Report.con=e.data.description,this.Report.getreportid=e.data.createdBy})).catch((t=>{console.log(t)})),await this.$axios.get("/api/v1/user/"+this.Report.getreportid).then((t=>{this.Report.getreport=t.data.username})).catch((t=>{console.log(t)}))):(await this.$axios({method:"get",url:"/api/v1/review/"+t[1]}).then((e=>{this.Report.reviewId=t[1],this.Report.con=e.data.description,this.Report.getreportid=e.data.createdBy})).catch((t=>{console.log(t)})),await this.$axios.get("/api/v1/user/"+this.Report.getreportid).then((t=>{this.Report.getreport=t.data.username})).catch((t=>{console.log(t)})))},getName(){this.$axios({method:"get",url:"/api/v1/user/"+this.Report.reporterId}).then((t=>{console.log(t),this.Report.reporter=t.data.username})).catch((t=>{console.log(t)}))}},data(){return{Report:{reporter:"",reporterId:"",getreportid:"",getreport:"",con:"",title:"",type:"",content:"",isFeed:!1,reviewId:"",feedId:""},mainMinHeight:""}}},l=p,d=o(1001),c=(0,d.Z)(l,r,i,!1,null,"47bd2e80",null),h=c.exports}}]);
//# sourceMappingURL=327.d4dcf240.js.map