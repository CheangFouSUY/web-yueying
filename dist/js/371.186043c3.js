"use strict";(self["webpackChunkse_project"]=self["webpackChunkse_project"]||[]).push([[371],{3371:function(e,s,t){t.r(s),t.d(s,{default:function(){return p}});var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("Header"),t("div",{staticClass:"resetPwd"},[t("el-row",{attrs:{justify:"center",type:"flex"}},[t("el-col",{attrs:{span:5}},[t("div",{staticClass:"Title"},[t("span",[e._v("设置新密码")])])])],1),t("el-row",{attrs:{justify:"center",type:"flex"}},[t("el-col",{attrs:{span:5}},[t("div",{staticClass:"Box"},[t("span",[e._v("新密码")]),t("el-input",{attrs:{placeholder:"请输入新密码","show-password":""},model:{value:e.password1,callback:function(s){e.password1=s},expression:"password1"}})],1)])],1),t("el-row",{attrs:{justify:"center",type:"flex"}},[t("el-col",{attrs:{span:5}},[t("div",{staticClass:"Box"},[t("span",[e._v("重复新密码")]),t("el-input",{attrs:{placeholder:"请重新输入新密码","show-password":""},model:{value:e.password2,callback:function(s){e.password2=s},expression:"password2"}})],1)])],1),t("el-row",{attrs:{justify:"center",type:"flex"}},[t("el-col",{attrs:{span:8}},[t("div",{staticClass:"Box"},[t("el-button",{attrs:{type:"primary"},on:{click:e.confirmNewPassword}},[e._v("确定设置")])],1)])],1)],1)],1)},o=[],r=t(3083),n={name:"ResetPwd1n2",components:{Header:r.Z},data(){return{password1:"",password2:"",token:""}},methods:{returnLogin(){this.$router.push({path:"/login"})},getToken(e){this.$axios({method:"get",url:"/api/v1/auth/request-validate/?token="+e}).then((e=>{console.log(e),localStorage.setItem("token",e.data.tokens.access)})).catch((e=>{console.log(e),this.$message.warning("此链接已过期，请重新申请邮箱验证"),this.$router.push({path:"/emailverify"})}))},confirmNewPassword(){if(""==this.password1||""==this.password2)return void this.$message.warning("新密码和重复新密码不可为空");const e=new FormData;e.append("password",this.password1),e.append("password2",this.password2);var s={};localStorage.getItem("token")&&(s={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"put",url:"/api/v1/auth/resetpwd/email/",data:e,headers:s}).then((e=>{console.log(e),this.$router.push({path:"/login"}),this.$message.success("设置成功，马上用新密码登录吧~")})).catch((e=>{if(console.log(e),console.log(e.response.data.detail),"Authentication credentials were not provided."==e.response.data.detail)this.$message.warning("此链接已过期，请重新申请邮箱验证");else switch(e.response.data.error[0]){case"Password must match.":this.$message.warning("新密码和重复新密码不匹配");break;default:this.$message.warning("密码需包含字母、数字及符号且字符数>=8")}}))}},mounted(){const e=this.$route.query.token;this.getToken(e)}},i=n,l=t(1001),c=(0,l.Z)(i,a,o,!1,null,"4ed5f70c",null),p=c.exports}}]);
//# sourceMappingURL=371.186043c3.js.map