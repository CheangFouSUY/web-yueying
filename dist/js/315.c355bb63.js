"use strict";(self["webpackChunkse_project"]=self["webpackChunkse_project"]||[]).push([[315],{5315:function(t,e,i){i.r(e),i.d(e,{default:function(){return h}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Header",{attrs:{id:"header"}}),i("div",{style:{"min-height":t.mainMinHeight+"px"},attrs:{id:"main"}},[t._m(0),i("el-row",{staticClass:"ctg-title"},[t._v("分类")]),i("el-row",{staticClass:"ctg-list"},[i("el-col",{staticClass:"ctg-list-type",attrs:{span:2}},[t._v("类型")]),i("el-col",{attrs:{span:18}},t._l(t.categoryList,(function(e){return i("li",{key:e.id,staticClass:"normalCategory",class:{activeCategory:e.isActive},on:{click:function(i){return t.changeFilter(e.id)}}},[t._v(" "+t._s(e.des)+" ")])})),0)],1),i("el-divider"),i("el-row",{staticClass:"result-wrap"},t._l(t.filterResult,(function(e){return i("div",{key:e.id,staticClass:"item-box"},[i("el-image",{staticClass:"poster",attrs:{src:e.thumbnail,fit:"cover"},on:{click:function(i){return t.goDetails(e.id)}}}),i("div",{staticClass:"title-wrap"},[i("span",{staticClass:"book-title",on:{click:function(i){return t.goDetails(e.id)}}},[t._v(" "+t._s(e.title)+" ")]),i("span",{staticClass:"rating"},[t._v(t._s(e.rating))])])],1)})),0)],1),i("Footer",{attrs:{id:"footer"}})],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-title"},[s("img",{attrs:{src:i(1160),alt:"book icon"}}),s("span",[t._v("图书")])])}],r=i(3083),o=i(3445),l={name:"BookFilterpage",components:{Header:r.Z,Footer:o.Z},mounted(){this.getBook(),this.mainMinHeight=document.documentElement.clientHeight-$("#header").outerHeight(!0)-$("#footer").outerHeight(!0)-6},watch:{$route:{handler:"getBook"}},methods:{goDetails(t){this.$router.push({path:`/book/detail/${t}`})},changeFilter(t){this.$router.replace({name:"book filter",params:{id:t}})},getBook(){var t;this.nowCategory=this.$route.params.id,t=99==this.nowCategory?"/api/v1/book/list":"/api/v1/book/list?category="+this.$route.params.id,this.renewFilterView(),this.$axios({method:"get",url:t}).then((t=>{this.filterResult=t.data.results,this.setRating(this.filterResult),console.log(this.filterResult)})).catch((t=>{console.log(t)}))},renewFilterView(){for(let t=0;t<this.categoryList.length;t++)this.categoryList[t].id==this.nowCategory?this.categoryList[t].isActive=!0:this.categoryList[t].isActive=!1},setRating(t){return t.forEach((function(t,e,i){i[e].rating=i[e].rating.toFixed(1)}))}},data(){return{nowCategory:"",categoryList:[{id:99,des:"全部",isActive:!0},{id:1,des:"爱情",isActive:!1},{id:2,des:"恐怖",isActive:!1},{id:3,des:"悬疑",isActive:!1},{id:4,des:"科幻",isActive:!1},{id:5,des:"艺术",isActive:!1},{id:6,des:"体育",isActive:!1},{id:7,des:"烹饪",isActive:!1},{id:8,des:"漫画",isActive:!1},{id:9,des:"教育",isActive:!1},{id:10,des:"哲学",isActive:!1},{id:11,des:"文学",isActive:!1},{id:0,des:"其他",isActive:!1}],filterResult:[],mainMinHeight:""}}},c=l,n=i(1001),d=(0,n.Z)(c,s,a,!1,null,"514fbdd6",null),h=d.exports}}]);
//# sourceMappingURL=315.c355bb63.js.map