{"version":3,"file":"js/328.a4e8d415.js","mappings":"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","sources":["webpack://se_project/./src/views/ManageGroup.vue?68e1","webpack://se_project/src/views/ManageGroup.vue","webpack://se_project/./src/views/ManageGroup.vue?7e6f","webpack://se_project/./src/views/ManageGroup.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Header'),_c('el-row',{attrs:{\"justify\":\"center\",\"type\":\"flex\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('div',{staticClass:\"manageGroup\"},[_c('span',[_vm._v(\"管理员申请\")])])])],1),_vm._l((_vm.requestList),function(item){return _c('el-row',{key:item.id,attrs:{\"justify\":\"center\",\"type\":\"flex\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('div',{staticClass:\"adminRequest\"},[(item.profile)?_c('el-avatar',{attrs:{\"id\":\"userAvatar\",\"src\":item.profile}}):_c('el-avatar',{attrs:{\"id\":\"userAvatar\",\"icon\":\"el-icon-user-solid\"}}),_c('span',{attrs:{\"id\":\"itemUsername\"}},[_vm._v(_vm._s(item.username))]),_c('el-button',{staticClass:\"accdecButton\",attrs:{\"type\":\"success\",\"round\":\"\"},on:{\"click\":function($event){return _vm.acceptRequest(item.id)}}},[_vm._v(\"同意\")]),_c('el-button',{staticClass:\"accdecButton\",attrs:{\"type\":\"danger\",\"round\":\"\"},on:{\"click\":function($event){return _vm.declineRequest(item.id)}}},[_vm._v(\"拒绝\")])],1)])],1)}),_c('el-row',{attrs:{\"justify\":\"center\",\"type\":\"flex\"}},[(_vm.requestList.length == 0)?_c('el-col',{attrs:{\"span\":12}},[_c('div',{staticClass:\"noRequest\"},[_c('span',[_vm._v(\"抱歉！目前暂无申请\")])])]):_vm._e()],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <Header></Header>\r\n        <el-row justify=\"center\" type=\"flex\">\r\n            <el-col :span=\"12\"><div class=\"manageGroup\">\r\n                <span>管理员申请</span>\r\n            </div></el-col>\r\n        </el-row>\r\n        <el-row v-for=\"item in requestList\" :key=\"item.id\" justify=\"center\" type=\"flex\">\r\n            <el-col :span=\"12\"><div class=\"adminRequest\">\r\n                <el-avatar v-if=\"item.profile\" id=\"userAvatar\" :src=\"item.profile\"></el-avatar>\r\n                <el-avatar v-else id=\"userAvatar\" icon=\"el-icon-user-solid\"></el-avatar>\r\n                <span id=\"itemUsername\">{{ item.username }}</span>\r\n                 <el-button class=\"accdecButton\" type=\"success\" round @click=\"acceptRequest(item.id)\">同意</el-button>\r\n                 <el-button class=\"accdecButton\" type=\"danger\" round @click=\"declineRequest(item.id)\">拒绝</el-button>\r\n            </div></el-col>\r\n        </el-row>\r\n        <el-row justify=\"center\" type=\"flex\">\r\n        <el-col :span=\"12\" v-if=\"requestList.length == 0\"><div class=\"noRequest\">\r\n            <span>抱歉！目前暂无申请</span>\r\n        </div></el-col>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport Header from \"@/components/Header.vue\";\r\nimport Footer from \"@/components/Footer.vue\";\r\nimport user from \"@/store/user\";\r\n\r\nexport default {\r\n    name: 'Manage Group',\r\n    components: {\r\n        Header,\r\n        Footer,\r\n    },\r\n    data() {\r\n        return {\r\n            requestList:[],\r\n            userId:'',\r\n            isOwnerOrAdmin: false,\r\n            admin:[],\r\n            mainadmin:[],\r\n        }\r\n    },\r\n    methods: {\r\n        getRequest() {\r\n            this.$axios({\r\n                method:'get',\r\n                url:'/api/v1/group/requestuser/' + this.$route.params.id,\r\n            })\r\n            .then(res =>{\r\n                console.log(res);\r\n                console.log(res.data.results.length);\r\n                this.requestList = res.data.results;\r\n            })\r\n            .catch(err =>{\r\n                console.log(err);\r\n            })\r\n        },\r\n        acceptRequest(userId) {\r\n        var header = {};\r\n        if (localStorage.getItem(\"token\"))\r\n            header = { Authorization: \"Bearer \" + localStorage.getItem(\"token\") };\r\n\r\n        this.$axios({\r\n            method: \"put\",\r\n            url:\r\n            \"/api/v1/group/setRole/\" +\r\n            this.$route.params.id +\r\n            \"/\" +\r\n            userId +\r\n            \"/2\",\r\n            headers: header,\r\n        })\r\n            .then((res) => {\r\n            console.log(res);\r\n            this.$message.success(\"同意成功！\");\r\n            setTimeout(function () {\r\n                location.reload(true);\r\n            }, 500);\r\n            })\r\n            .catch((err) => {\r\n            console.log(err);\r\n            });\r\n        },\r\n        declineRequest(userId) {\r\n        var header = {};\r\n        if (localStorage.getItem(\"token\"))\r\n            header = { Authorization: \"Bearer \" + localStorage.getItem(\"token\") };\r\n\r\n        this.$axios({\r\n            method: \"put\",\r\n            url:\r\n            \"/api/v1/group/setRole/\" +\r\n            this.$route.params.id +\r\n            \"/\" +\r\n            userId +\r\n            \"/3\",\r\n            headers: header,\r\n        })\r\n            .then((res) => {\r\n            console.log(res);\r\n            this.$message.success(\"拒绝成功！\");\r\n            setTimeout(function () {\r\n                location.reload(true);\r\n            }, 500);\r\n            })\r\n            .catch((err) => {\r\n            console.log(err);\r\n            });\r\n        },\r\n        async getGroupInfo() {\r\n            await this.$axios\r\n                .all([\r\n                this.getGroupMainAdmin(),\r\n                this.getGroupAdmin(),\r\n                ])\r\n                .then(\r\n                this.$axios.spread((gMAdmin, gAdmin) => {\r\n                    this.admin = gAdmin.data.results;\r\n                    this.mainadmin = gMAdmin.data.results;\r\n\r\n                    for (let i = 0; i < gAdmin.data.results.length; i++) {\r\n                    if (gAdmin.data.results[i].id === this.userId) {\r\n                        this.isOwnerOrAdmin = true;\r\n                        break;\r\n                    }\r\n                    }\r\n\r\n                    if (gMAdmin.data.results[0].id === this.userId) {\r\n                        this.isOwnerOrAdmin = true;\r\n                    }\r\n\r\n                    if(!this.isOwnerOrAdmin) {\r\n                        this.$router.push({ path:'/group/' + this.$route.params.id})\r\n                    }\r\n                    console.log(this.isOwnerOrAdmin);\r\n                })\r\n                )\r\n                .catch((err) => {\r\n                console.log(err);\r\n                });\r\n        },\r\n        getGroupMainAdmin() {\r\n        return this.$axios({\r\n            method: \"get\",\r\n            url: \"/api/v1/group/members/\" + this.$route.params.id + \"?role=1\",\r\n        });\r\n        },\r\n        getGroupAdmin() {\r\n        return this.$axios({\r\n            method: \"get\",\r\n            url: \"/api/v1/group/members/\" + this.$route.params.id + \"?role=2\",\r\n        });\r\n        },\r\n    },\r\n    mounted() {\r\n        this.getRequest();\r\n        this.getGroupInfo();\r\n    },\r\n    created() {\r\n        var userInfo;\r\n        if ((userInfo = user.getters.getUser(user.state()))) {\r\n            if (userInfo.user.confirmed) {\r\n                this.userId = userInfo.user.id;\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.manageGroup {\r\n    /* background-color: red; */\r\n    text-align: center;\r\n    margin-top: 10px;\r\n    font-size: 36px;\r\n    font-weight: bold;\r\n    margin-bottom: 10px;\r\n}\r\n.adminRequest {\r\n    display: flex;\r\n    background-color: #d0e8f2;\r\n    /* border: 1px solid; */\r\n    border-radius: 10px;\r\n    padding-left: 10px;\r\n    padding-top: 5px;\r\n    padding-bottom: 5px;\r\n    font-size: 30px;\r\n    margin-bottom: 5px;\r\n}\r\n.accdecButton{\r\n    /* float: right !important;\r\n    margin-right: 10px; */\r\n}\r\n.noRequest{\r\n    margin-top: 10px;\r\n    text-align: center;\r\n}\r\n#itemUsername{\r\n    margin-left: 10px;\r\n    /* border: 1px solid; */\r\n    width: 540px;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ManageGroup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ManageGroup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ManageGroup.vue?vue&type=template&id=3f8a0282&scoped=true&\"\nimport script from \"./ManageGroup.vue?vue&type=script&lang=js&\"\nexport * from \"./ManageGroup.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ManageGroup.vue?vue&type=style&index=0&id=3f8a0282&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3f8a0282\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","_l","item","key","id","profile","_s","username","on","$event","acceptRequest","declineRequest","requestList","length","_e","staticRenderFns","name","components","Footer","userId","isOwnerOrAdmin","admin","mainadmin","methods","method","url","then","res","console","catch","err","header","Authorization","headers","setTimeout","location","all","path","component"],"sourceRoot":""}