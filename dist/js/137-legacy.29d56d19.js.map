{"version":3,"file":"js/137-legacy.29d56d19.js","mappings":"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","sources":["webpack://se_project/./src/views/FeedMainpage.vue?6443","webpack://se_project/src/views/FeedMainpage.vue","webpack://se_project/./src/views/FeedMainpage.vue?de21","webpack://se_project/./src/views/FeedMainpage.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"all\"},[_c('Header',{attrs:{\"id\":\"header\"}}),_c('div',{style:({ 'min-height': _vm.mainMinHeight + 'px' }),attrs:{\"id\":\"main\"}},[_vm._m(0),_c('el-row',{staticClass:\"tag-box\"},_vm._l((_vm.tags.slice(0, 9)),function(item){return _c('span',{key:item.id,on:{\"click\":function($event){return _vm.enterTag(item.id)}}},[_vm._v(\" #\"+_vm._s(item.title)+\"# \")])}),0),_vm._l((_vm.notGroupFeeds.slice(0, 20)),function(item){return _c('FeedBox',{key:item.id,attrs:{\"initialFeedId\":item.id,\"initialIsInnerpage\":false,\"initialIsPin\":false,\"initialIsFeatured\":false,\"initialIsAdmin\":false}})})],2),_c('Footer',{attrs:{\"id\":\"footer\"}}),_c('el-backtop',{attrs:{\"target\":\".all\"}},[_c('i',{staticClass:\"el-icon-arrow-up\",staticStyle:{\"color\":\"#456268\"}})])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-title\"},[_c('img',{attrs:{\"src\":require(\"@/assets/Feed.svg\"),\"alt\":\"feed icon\"}}),_c('span',[_vm._v(\"话题广场\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"all\">\r\n    <Header id=\"header\"></Header>\r\n    <div id=\"main\" :style=\"{ 'min-height': mainMinHeight + 'px' }\">\r\n      <div class=\"page-title\">\r\n        <img src=\"@/assets/Feed.svg\" alt=\"feed icon\" />\r\n        <span>话题广场</span>\r\n      </div>\r\n      <el-row class=\"tag-box\">\r\n        <span v-for=\"item in tags.slice(0, 9)\" :key=\"item.id\" @click=\"enterTag(item.id)\">\r\n          #{{ item.title }}#\r\n        </span>\r\n      </el-row>\r\n\r\n      <FeedBox\r\n        v-for=\"item in notGroupFeeds.slice(0, 20)\"\r\n        :key=\"item.id\"\r\n        :initialFeedId=\"item.id\"\r\n        :initialIsInnerpage=\"false\"\r\n        :initialIsPin=\"false\"\r\n        :initialIsFeatured=\"false\"\r\n        :initialIsAdmin=\"false\"\r\n      ></FeedBox>\r\n    </div>\r\n    <Footer id=\"footer\"></Footer>\r\n    <el-backtop target=\".all\">\r\n      <i class=\"el-icon-arrow-up\" style=\"color: #456268\"></i>\r\n    </el-backtop>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Header from \"@/components/Header.vue\";\r\nimport Footer from \"@/components/Footer.vue\";\r\nimport FeedBox from \"@/components/FeedBox.vue\";\r\nimport User from \"@/store/user\";\r\n\r\nexport default {\r\n  name: \"FeedMainpage\",\r\n  components: {\r\n    Header,\r\n    Footer,\r\n    FeedBox,\r\n  },\r\n  data() {\r\n    return {\r\n      islogin: false,\r\n      user: \"\",\r\n      activeName: \"all\",\r\n      formVisible: false,\r\n      form: {\r\n        title: \"\",\r\n        description: \"\",\r\n        img: \"\",\r\n      },\r\n      dataList: \"\",\r\n      feeds: [],\r\n      tags: [],\r\n      mainMinHeight: \"\",\r\n    };\r\n  },\r\n  mounted() {\r\n    var userInfo;\r\n    if ((userInfo = User.getters.getUser(User.state()))) {\r\n      this.islogin = true;\r\n      this.userId = userInfo.user.id;\r\n    }\r\n    this.getTag();\r\n    this.getFeed();\r\n    this.mainMinHeight = document.documentElement.clientHeight - $(\"#header\").outerHeight(true) - $(\"#footer\").outerHeight(true) - 6;\r\n  },\r\n  computed: {\r\n    notGroupFeeds() {\r\n      return this.feeds.filter((item) => {\r\n        return item.isPublic;\r\n      });\r\n    },\r\n  },\r\n  methods: {\r\n    handleChange(file, fileList) {\r\n      this.form.img = file.raw;\r\n      console.log(this.form.img);\r\n    },\r\n    handleExceed(files, fileList) {\r\n      this.$message.warning(\r\n        `当前限制选择 1 个文件，本次选择了 ${files.length} 个文件，共选择了 ${\r\n          files.length + fileList.length\r\n        } 个文件`\r\n      );\r\n    },\r\n    beforeRemove(file, fileList) {\r\n      return this.$confirm(`确定移除 ${file.name}？`);\r\n    },\r\n    postFeed() {\r\n      if (!this.form.title) {\r\n        this.$notify({\r\n          showClose: true,\r\n          type: \"warning\",\r\n          title: \"标题不能为空\",\r\n          position: \"top-left\",\r\n        });\r\n        return;\r\n      } else if (this.form.description.length < 25) {\r\n        this.$notify({\r\n          showClose: true,\r\n          type: \"warning\",\r\n          title: \"帖子内容不能少于25字\",\r\n          position: \"top-left\",\r\n        });\r\n        return;\r\n      }\r\n      let formData = new FormData();\r\n      formData.append(\"title\", this.form.title);\r\n      formData.append(\"description\", this.form.description);\r\n      formData.append(\"img\", this.form.img);\r\n\r\n      var header = {};\r\n      if (localStorage.getItem(\"token\"))\r\n        header = { Authorization: \"Bearer \" + localStorage.getItem(\"token\") };\r\n\r\n      this.$axios({\r\n        method: \"post\",\r\n        url: \"/api/v1/feed/\",\r\n        data: formData,\r\n        headers: header,\r\n      })\r\n        .then((res) => {\r\n          console.log(res);\r\n          this.formVisible = false;\r\n          switch (res.status) {\r\n            case 201:\r\n              this.$notify({\r\n                showClose: true,\r\n                message: \"已发表帖子\",\r\n                type: \"success\",\r\n                position: \"top-left\",\r\n              });\r\n              setTimeout(function () {\r\n                location.reload();\r\n              }, 1500);\r\n              break;\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          switch (err.response.status) {\r\n            case 400:\r\n              this.$notify({\r\n                title: \"标题和内容不能为空！\",\r\n                type: \"warning\",\r\n                position: \"top-left\",\r\n              });\r\n              break;\r\n            case 401:\r\n              this.$notify({\r\n                title: \"请先加入小组！\",\r\n                type: \"warning\",\r\n                position: \"top-left\",\r\n              });\r\n              break;\r\n          }\r\n        });\r\n    },\r\n    getTag() {\r\n      this.$axios({\r\n        method: \"get\",\r\n        url: \"/api/v1/tag/list\",\r\n      })\r\n        .then((res) => {\r\n          console.log(res);\r\n          this.tags = res.data.results;\r\n          console.log(this.tags);\r\n        })\r\n        .then((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    getFeed() {\r\n      var header = {};\r\n      if (localStorage.getItem(\"token\"))\r\n        header = { Authorization: \"Bearer \" + localStorage.getItem(\"token\") };\r\n      this.$axios({\r\n        method: \"get\",\r\n        url: \"/api/v1/feed/list?orderBy=l\",\r\n        headers: header,\r\n      }).then((res) => {\r\n        console.log(res);\r\n        this.feeds = res.data.results;\r\n        console.log(this.feeds);\r\n\r\n        for(let i = 0; i < this.feeds.length; i++) {\r\n          if(this.feeds[i].isPublic) {\r\n            this.notGroupFeedsLen += 1;\r\n            console.log(\"not Group Feeds + 1\")\r\n          }\r\n        }\r\n      });\r\n    },\r\n    getImg(event) {\r\n      var fileName = event.target.files[0].name;\r\n      $(\".showFileName\").html(fileName);\r\n      console.log(fileName);\r\n      this.form.img = event.target.files[0];\r\n      console.log(\"get img! \", this.form);\r\n    },\r\n    enterTag(tagid) {\r\n      this.$router.push({ path: `/tag/${tagid}` });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.el-dialog__header {\r\n  background-color: #ccd9de;\r\n}\r\n.el-dialog__title,\r\n.el-dialog__headerbtn i {\r\n  color: #456268 !important;\r\n  font-size: 24px;\r\n}\r\n.el-form-item__label {\r\n  color: #456268;\r\n  font-size: 20px;\r\n}\r\n</style>\r\n<style scoped>\r\n.button-no:hover {\r\n  background-color: rgba(121, 163, 177, 0.1);\r\n  border-color: rgba(121, 163, 177, 0.4);\r\n}\r\n.button-yes:active,\r\n.button-yes:hover {\r\n  border-color: rgba(121, 163, 177, 0.4);\r\n}\r\n.button-yes {\r\n  color: #456268;\r\n  background-color: rgba(121, 163, 177, 0.4);\r\n  border-color: transparent;\r\n}\r\n.button-no {\r\n  color: #456268;\r\n}\r\n.form-button:hover {\r\n  cursor: pointer;\r\n}\r\n.form-upload-img {\r\n  margin-top: 30px;\r\n  padding: 5px 15px;\r\n  border: none;\r\n  background-color: rgba(121, 163, 177, 0.25);\r\n  color: #456268;\r\n  border-radius: 5px;\r\n  font-size: 18px;\r\n}\r\n.showFileName {\r\n  color: #456268;\r\n  margin: 0 15px;\r\n  line-height: 26px;\r\n}\r\n#imgUpload {\r\n  display: none;\r\n}\r\n.post-now:hover {\r\n  cursor: pointer;\r\n  box-shadow: 0px 0px 10px rgba(121, 163, 177, 0.25);\r\n}\r\n.post-now {\r\n  margin-left: 45px;\r\n  padding: 10px 20px;\r\n  font-size: 22px;\r\n  /* font-weight: 600; */\r\n  color: #456268;\r\n  border: none;\r\n  border-radius: 10px;\r\n  background-color: rgba(121, 163, 177, 0.4);\r\n}\r\n\r\n.tag-box span:hover {\r\n  color: #79a3b1;\r\n  cursor: pointer;\r\n}\r\n.tag-box span {\r\n  display: inline-block;\r\n  width: 33%;\r\n  margin: 5px 0;\r\n  font-size: 20px;\r\n  color: #456268;\r\n}\r\n.tag-box {\r\n  margin: 10px 0 30px;\r\n}\r\n.page-title img {\r\n  width: 65px;\r\n  vertical-align: middle;\r\n}\r\n.page-title span {\r\n  vertical-align: middle;\r\n  margin-left: 5px;\r\n}\r\n.page-title {\r\n  font-size: 32px;\r\n  margin-top: 20px;\r\n  color: #456268;\r\n}\r\n\r\n#main {\r\n  width: 1200px;\r\n  margin: auto;\r\n  padding: 30px 0;\r\n  box-sizing: border-box;\r\n}\r\n#footer {\r\n  bottom: 0;\r\n}\r\n.all {\r\n  height: 100vh;\r\n  overflow-x: hidden;\r\n}\r\nbutton {\r\n  font-family: \"Microsoft JhengHei\", 微软正黑体, \"Microsoft YaHei\", 微软雅黑;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FeedMainpage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FeedMainpage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FeedMainpage.vue?vue&type=template&id=1e964413&scoped=true&\"\nimport script from \"./FeedMainpage.vue?vue&type=script&lang=js&\"\nexport * from \"./FeedMainpage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FeedMainpage.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./FeedMainpage.vue?vue&type=style&index=1&id=1e964413&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1e964413\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","style","mainMinHeight","_m","_l","tags","slice","item","key","id","on","$event","enterTag","_v","_s","title","notGroupFeeds","staticStyle","staticRenderFns","name","components","Header","Footer","FeedBox","data","islogin","user","activeName","formVisible","form","description","img","dataList","feeds","mounted","userInfo","userId","getTag","getFeed","document","documentElement","clientHeight","$","outerHeight","computed","filter","isPublic","methods","handleChange","file","fileList","raw","console","log","handleExceed","files","$message","warning","beforeRemove","$confirm","postFeed","$notify","showClose","type","position","formData","append","header","localStorage","getItem","Authorization","$axios","method","url","headers","then","message","setTimeout","location","catch","res","getImg","event","fileName","target","html","tagid","$router","push","path","component"],"sourceRoot":""}