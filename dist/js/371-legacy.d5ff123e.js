"use strict";(self["webpackChunkse_project"]=self["webpackChunkse_project"]||[]).push([[371],{63371:function(e,t,s){s.r(t),s.d(t,{default:function(){return p}});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Header"),s("div",{staticClass:"resetPwd"},[s("el-row",{attrs:{justify:"center",type:"flex"}},[s("el-col",{attrs:{span:5}},[s("div",{staticClass:"Title"},[s("span",[e._v("设置新密码")])])])],1),s("el-row",{attrs:{justify:"center",type:"flex"}},[s("el-col",{attrs:{span:5}},[s("div",{staticClass:"Box"},[s("span",[e._v("新密码")]),s("el-input",{attrs:{placeholder:"请输入新密码","show-password":""},model:{value:e.password1,callback:function(t){e.password1=t},expression:"password1"}})],1)])],1),s("el-row",{attrs:{justify:"center",type:"flex"}},[s("el-col",{attrs:{span:5}},[s("div",{staticClass:"Box"},[s("span",[e._v("重复新密码")]),s("el-input",{attrs:{placeholder:"请重新输入新密码","show-password":""},model:{value:e.password2,callback:function(t){e.password2=t},expression:"password2"}})],1)])],1),s("el-row",{attrs:{justify:"center",type:"flex"}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"Box"},[s("el-button",{attrs:{type:"primary"},on:{click:e.confirmNewPassword}},[e._v("确定设置")])],1)])],1)],1)],1)},o=[],r=s(13083),n={name:"ResetPwd1n2",components:{Header:r.Z},data:function(){return{password1:"",password2:"",token:""}},methods:{returnLogin:function(){this.$router.push({path:"/login"})},getToken:function(e){var t=this;this.$axios({method:"get",url:"/api/v1/auth/request-validate/?token="+e}).then((function(e){console.log(e),localStorage.setItem("token",e.data.tokens.access)})).catch((function(e){console.log(e),t.$message.warning("此链接已过期，请重新申请邮箱验证"),t.$router.push({path:"/emailverify"})}))},confirmNewPassword:function(){var e=this;if(""!=this.password1&&""!=this.password2){var t=new FormData;t.append("password",this.password1),t.append("password2",this.password2);var s={};localStorage.getItem("token")&&(s={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"put",url:"/api/v1/auth/resetpwd/email/",data:t,headers:s}).then((function(t){console.log(t),e.$router.push({path:"/login"}),e.$message.success("设置成功，马上用新密码登录吧~")})).catch((function(t){if(console.log(t),console.log(t.response.data.detail),"Authentication credentials were not provided."==t.response.data.detail)e.$message.warning("此链接已过期，请重新申请邮箱验证");else switch(t.response.data.error[0]){case"Password must match.":e.$message.warning("新密码和重复新密码不匹配");break;default:e.$message.warning("密码需包含字母、数字及符号且字符数>=8")}}))}else this.$message.warning("新密码和重复新密码不可为空")}},mounted:function(){var e=this.$route.query.token;this.getToken(e)}},i=n,l=s(1001),c=(0,l.Z)(i,a,o,!1,null,"4ed5f70c",null),p=c.exports}}]);
//# sourceMappingURL=371-legacy.d5ff123e.js.map