"use strict";(self["webpackChunkse_project"]=self["webpackChunkse_project"]||[]).push([[327],{28327:function(e,t,o){o.r(t),o.d(t,{default:function(){return v}});var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"report"},[o("Header",{attrs:{id:"header"}}),o("div",{style:{"min-height":e.mainMinHeight+"px"},attrs:{id:"main"}},[o("div",{staticClass:"name"},[o("el-row",[o("span",{attrs:{id:"namespan"}},[e._v("举报者姓名 :")]),o("span",{attrs:{id:"name"}},[e._v(e._s(e.Report.reporter))])]),o("el-row",[o("span",{attrs:{id:"conspan"}},[e._v("  举报内容  :")]),o("span",{attrs:{id:"con"}},[e._v("["+e._s(e.Report.getreport)+"] "+e._s(e.Report.con))])])],1),o("div",{staticClass:"content"},[o("div",[o("span",[e._v("举报标题 :")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.Report.title,expression:"Report.title"}],attrs:{type:"text",placeholder:"举报标题"},domProps:{value:e.Report.title},on:{input:function(t){t.target.composing||e.$set(e.Report,"title",t.target.value)}}})]),o("div",[o("span",[e._v("举报类型 :")]),o("select",{directives:[{name:"model",rawName:"v-model",value:e.Report.type,expression:"Report.type"}],attrs:{id:"reportType",name:"reportType"},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.Report,"type",t.target.multiple?o:o[0])}}},[o("option",{staticStyle:{display:"none"}}),o("option",{attrs:{value:"1"}},[e._v("垃圾内容")]),o("option",{attrs:{value:"2"}},[e._v("色情内容")]),o("option",{attrs:{value:"3"}},[e._v("非法活动")]),o("option",{attrs:{value:"4"}},[e._v("侵犯版权")]),o("option",{attrs:{value:"5"}},[e._v("骚扰、欺凌和威胁")]),o("option",{attrs:{value:"6"}},[e._v("仇恨言论")]),o("option",{attrs:{value:"7"}},[e._v("暴力内容")])])]),o("div",{staticClass:"concontent"},[o("span",[e._v("举报详情 :")]),o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.Report.content,expression:"Report.content"}],attrs:{id:"content",name:"content",placeholder:"请输入举报详情(不少于15字符)"},domProps:{value:e.Report.content},on:{input:function(t){t.target.composing||e.$set(e.Report,"content",t.target.value)}}})]),o("button",{on:{click:function(t){return e.Submit()}}},[e._v("提交")])])]),o("Footer",{attrs:{id:"footer"}})],1)},n=[],a=o(16198),i=(o(78975),o(74916),o(23123),o(82526),o(41817),o(13083)),s=o(43445),p=o(22282),c={components:{Header:i.Z,Footer:s.Z,User:p.Z},mounted:function(){var e;(e=p.Z.getters.getUser(p.Z.state()))&&(this.islogin=!0,this.Report.reporterId=e.user.id,this.getName()),this.getDetail(),this.mainMinHeight=document.documentElement.clientHeight-$("#header").outerHeight(!0)-$("#footer").outerHeight(!0)-6},methods:{Submit:function(){var e=this;if(this.Report.title)if(this.Report.content.length<15)this.$notify({showClose:!0,message:"举报详情字符字数不得少于15",type:"warning",position:"top-left"});else{var t=new FormData;t.append("title",this.Report.title),t.append("description",this.Report.content),t.append("category",this.Report.type),this.Report.isFeed?t.append("reportFeed",this.Report.feedId):t.append("reportReview",this.Report.reviewId);var o={};localStorage.getItem("token")&&(o={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"post",url:"/api/v1/report/",data:t,headers:o}).then((function(t){console.log(t),e.$message({showClose:!0,message:"提交成功，感谢您的举报！",type:"success"}),e.$router.push("/")})).catch((function(e){console.log(e)}))}else this.$notify({showClose:!0,message:"标题不可为空！",type:"warning",position:"top-left"})},getDetail:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=e.$route.params.id.split("&"),"f"!=o[0]){t.next=9;break}return e.Report.isFeed=!0,t.next=5,e.$axios({method:"get",url:"/api/v1/feed/"+o[1]}).then((function(t){e.Report.feedId=o[1],e.Report.con=t.data.description,e.Report.getreportid=t.data.createdBy})).catch((function(e){console.log(e)}));case 5:return t.next=7,e.$axios.get("/api/v1/user/"+e.Report.getreportid).then((function(t){e.Report.getreport=t.data.username})).catch((function(e){console.log(e)}));case 7:t.next=13;break;case 9:return t.next=11,e.$axios({method:"get",url:"/api/v1/review/"+o[1]}).then((function(t){e.Report.reviewId=o[1],e.Report.con=t.data.description,e.Report.getreportid=t.data.createdBy})).catch((function(e){console.log(e)}));case 11:return t.next=13,e.$axios.get("/api/v1/user/"+e.Report.getreportid).then((function(t){e.Report.getreport=t.data.username})).catch((function(e){console.log(e)}));case 13:case"end":return t.stop()}}),t)})))()},getName:function(){var e=this;this.$axios({method:"get",url:"/api/v1/user/"+this.Report.reporterId}).then((function(t){console.log(t),e.Report.reporter=t.data.username})).catch((function(e){console.log(e)}))}},data:function(){return{Report:{reporter:"",reporterId:"",getreportid:"",getreport:"",con:"",title:"",type:"",content:"",isFeed:!1,reviewId:"",feedId:""},mainMinHeight:""}}},l=c,u=o(1001),d=(0,u.Z)(l,r,n,!1,null,"47bd2e80",null),v=d.exports}}]);
//# sourceMappingURL=327-legacy.f369272d.js.map