"use strict";(self["webpackChunkse_project"]=self["webpackChunkse_project"]||[]).push([[762],{12762:function(e,t,r){r.r(t),r.d(t,{default:function(){return p}});var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("Header",{attrs:{id:"header"}}),s("img",{style:{height:e.bgHeight+"px"},attrs:{id:"bg",src:r(49122)}}),s("div",{staticClass:"info"},[e._m(0),s("div",{staticClass:"inputBox"},[s("img",{staticClass:"icon",attrs:{src:r(65153),alt:"email_icon"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.username,expression:"form.username"}],attrs:{type:"text",placeholder:"请输入用户名或邮箱"},domProps:{value:e.form.username},on:{input:function(t){t.target.composing||e.$set(e.form,"username",t.target.value)}}})]),s("div",{staticClass:"inputBox"},[s("img",{staticClass:"icon",attrs:{src:r(51604),alt:"password_icon"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:e.form.password},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.Login.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}})]),s("div",{staticClass:"ForgetnRegister"},[s("span",{on:{click:e.ForgetPw}},[e._v("忘记密码")]),s("span",{attrs:{id:"symbol"}},[e._v("|")]),s("span",{on:{click:e.RegisterNow}},[e._v("立即注册")])]),s("button",{on:{click:e.Login}},[e._v("登录")])])],1)},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"logo"}},[s("img",{attrs:{src:r(66949)}})])}],a=r(16198),o=(r(78975),r(13083)),i=r(43445),u={name:"Login",components:{Header:o.Z,Footer:i.Z},data:function(){return{form:{username:"",password:""},bgHeight:""}},mounted:function(){this.bgHeight=document.documentElement.clientHeight-$("#header").outerHeight(!0)-1},methods:{ForgetPw:function(){this.$router.push("/emailverify")},RegisterNow:function(){this.$router.push("/register")},Login:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=e.form.username&&""!=e.form.password){t.next=3;break}return e.$message.warning("邮箱/用户名和密码不可为空"),t.abrupt("return");case 3:return r=new FormData,r.append("username",e.form.username),r.append("password",e.form.password),t.next=8,e.$axios({method:"post",url:"/api/v1/auth/login/",data:r}).then((function(t){switch(console.log(t),t.status){case 200:console.log(t.status),localStorage.setItem("token",t.data.tokens.access),e.$message.success("登录成功！"),e.$store.dispatch("saveUserInfo",{user:{username:t.data.username,confirmed:!0,id:t.data.id,profilePic:t.data.profile}});var r=localStorage.getItem("preRoute");setTimeout((function(){null==r||"/register"===r?e.$router.push("/"):e.$router.push({path:r})}),500);break}})).catch((function(t){console.log(t),e.$message.warning("用户名/邮箱不存在或密码错误")}));case 8:case"end":return t.stop()}}),t)})))()}}},c=u,l=r(1001),m=(0,l.Z)(c,s,n,!1,null,"926cc30c",null),p=m.exports},65153:function(e,t,r){e.exports=r.p+"img/Email.5e14ee3f.svg"},51604:function(e,t,r){e.exports=r.p+"img/Password.d253a656.svg"},49122:function(e,t,r){e.exports=r.p+"img/background.cc6328a5.jpg"}}]);
//# sourceMappingURL=762-legacy.32404bd7.js.map