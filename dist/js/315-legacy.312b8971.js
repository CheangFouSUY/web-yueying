"use strict";(self["webpackChunkse_project"]=self["webpackChunkse_project"]||[]).push([[315],{85315:function(t,i,e){e.r(i),e.d(i,{default:function(){return u}});var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("Header",{attrs:{id:"header"}}),e("div",{style:{"min-height":t.mainMinHeight+"px"},attrs:{id:"main"}},[t._m(0),e("el-row",{staticClass:"ctg-title"},[t._v("分类")]),e("el-row",{staticClass:"ctg-list"},[e("el-col",{staticClass:"ctg-list-type",attrs:{span:2}},[t._v("类型")]),e("el-col",{attrs:{span:18}},t._l(t.categoryList,(function(i){return e("li",{key:i.id,staticClass:"normalCategory",class:{activeCategory:i.isActive},on:{click:function(e){return t.changeFilter(i.id)}}},[t._v(" "+t._s(i.des)+" ")])})),0)],1),e("el-divider"),e("el-row",{staticClass:"result-wrap"},t._l(t.filterResult,(function(i){return e("div",{key:i.id,staticClass:"item-box"},[e("el-image",{staticClass:"poster",attrs:{src:i.thumbnail,fit:"cover"},on:{click:function(e){return t.goDetails(i.id)}}}),e("div",{staticClass:"title-wrap"},[e("span",{staticClass:"book-title",on:{click:function(e){return t.goDetails(i.id)}}},[t._v(" "+t._s(i.title)+" ")]),e("span",{staticClass:"rating"},[t._v(t._s(i.rating))])])],1)})),0)],1),e("Footer",{attrs:{id:"footer"}})],1)},a=[function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"page-title"},[s("img",{attrs:{src:e(81160),alt:"book icon"}}),s("span",[t._v("图书")])])}],o=(e(74916),e(15306),e(41539),e(54747),e(56977),e(13083)),r=e(43445),n={name:"BookFilterpage",components:{Header:o.Z,Footer:r.Z},mounted:function(){this.getBook(),this.mainMinHeight=document.documentElement.clientHeight-$("#header").outerHeight(!0)-$("#footer").outerHeight(!0)-6},watch:{$route:{handler:"getBook"}},methods:{goDetails:function(t){this.$router.push({path:"/book/detail/".concat(t)})},changeFilter:function(t){this.$router.replace({name:"book filter",params:{id:t}})},getBook:function(){var t,i=this;this.nowCategory=this.$route.params.id,t=99==this.nowCategory?"/api/v1/book/list":"/api/v1/book/list?category="+this.$route.params.id,this.renewFilterView(),this.$axios({method:"get",url:t}).then((function(t){i.filterResult=t.data.results,i.setRating(i.filterResult),console.log(i.filterResult)})).catch((function(t){console.log(t)}))},renewFilterView:function(){for(var t=0;t<this.categoryList.length;t++)this.categoryList[t].id==this.nowCategory?this.categoryList[t].isActive=!0:this.categoryList[t].isActive=!1},setRating:function(t){return t.forEach((function(t,i,e){e[i].rating=e[i].rating.toFixed(1)}))}},data:function(){return{nowCategory:"",categoryList:[{id:99,des:"全部",isActive:!0},{id:1,des:"爱情",isActive:!1},{id:2,des:"恐怖",isActive:!1},{id:3,des:"悬疑",isActive:!1},{id:4,des:"科幻",isActive:!1},{id:5,des:"艺术",isActive:!1},{id:6,des:"体育",isActive:!1},{id:7,des:"烹饪",isActive:!1},{id:8,des:"漫画",isActive:!1},{id:9,des:"教育",isActive:!1},{id:10,des:"哲学",isActive:!1},{id:11,des:"文学",isActive:!1},{id:0,des:"其他",isActive:!1}],filterResult:[],mainMinHeight:""}}},c=n,l=e(1001),d=(0,l.Z)(c,s,a,!1,null,"514fbdd6",null),u=d.exports}}]);
//# sourceMappingURL=315-legacy.312b8971.js.map