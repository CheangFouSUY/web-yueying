{"version":3,"file":"js/425-legacy.557411d7.js","mappings":"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","sources":["webpack://se_project/./src/views/TagInnerpage.vue?57d3","webpack://se_project/src/views/TagInnerpage.vue","webpack://se_project/./src/views/TagInnerpage.vue?1858","webpack://se_project/./src/views/TagInnerpage.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"all\"},[_c('Header',{attrs:{\"id\":\"header\"}}),_c('div',{style:({ 'min-height': _vm.mainMinHeight + 'px' }),attrs:{\"id\":\"main\"}},[_c('el-row',[_c('span',{staticClass:\"tag-title\"},[_vm._v(\"#\"+_vm._s(_vm.tagTitle)+\"#\")]),_c('el-row',{staticClass:\"action\"},[_c('span',{on:{\"click\":function($event){return _vm.openForm()}}},[_vm._v(\" 发布帖子 \")]),_c('el-divider',{attrs:{\"direction\":\"vertical\"}}),(!_vm.isJoined)?_c('span',{on:{\"click\":function($event){return _vm.joinTag()}}},[_vm._v(\" 参与话题 \")]):_c('span',{on:{\"click\":function($event){return _vm.unjoinTag()}}},[_vm._v(\" 退出话题 \")]),_c('el-dialog',{attrs:{\"title\":\"发布帖子\",\"visible\":_vm.formVisible},on:{\"update:visible\":function($event){_vm.formVisible=$event}}},[_c('el-form',{attrs:{\"label-position\":\"top\",\"model\":_vm.form}},[_c('el-form-item',{attrs:{\"label\":\"标题\",\"label-width\":_vm.formLabelWidth}},[_c('el-input',{attrs:{\"autocomplete\":\"off\",\"maxlength\":\"25\",\"show-word-limit\":\"\"},model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"内容\",\"label-width\":_vm.formLabelWidth}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":\"\",\"autocomplete\":\"off\",\"minlength\":\"25\",\"show-word-limit\":\"\",\"resize\":\"none\"},model:{value:(_vm.form.description),callback:function ($$v) {_vm.$set(_vm.form, \"description\", $$v)},expression:\"form.description\"}}),_c('el-upload',{attrs:{\"action\":\"\",\"auto-upload\":false,\"on-change\":_vm.handleChange,\"before-remove\":_vm.beforeRemove,\"limit\":1,\"accept\":\"image/jpeg,image/gif,image/png,image/jpg\",\"on-exceed\":_vm.handleExceed}},[_c('el-button',{staticClass:\"form-upload-img\",attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_c('i',{staticClass:\"el-icon-picture-outline-round\"}),_vm._v(\" 上传图片 \")])],1)],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{staticClass:\"button-no\",on:{\"click\":function($event){_vm.formVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{directives:[{name:\"loading\",rawName:\"v-loading.fullscreen.lock\",value:(_vm.fullscreenLoading),expression:\"fullscreenLoading\",modifiers:{\"fullscreen\":true,\"lock\":true}}],staticClass:\"button-yes\",on:{\"click\":function($event){return _vm.postFeed()}}},[_vm._v(\"发布\")])],1)],1)],1)],1),_vm._l((_vm.notGroupFeeds),function(item){return _c('FeedBox',{key:item.id,attrs:{\"initialFeedId\":item.id,\"initialIsInnerpage\":false,\"initialIsPin\":false,\"initialIsFeatured\":false,\"initialIsAdmin\":false}})})],2),_c('Footer',{attrs:{\"id\":\"footer\"}}),_c('el-backtop',{attrs:{\"target\":\".all\"}},[_c('i',{staticClass:\"el-icon-arrow-up\",staticStyle:{\"color\":\"#456268\"}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"all\">\r\n    <Header id=\"header\"></Header>\r\n    <div id=\"main\" :style=\"{ 'min-height': mainMinHeight + 'px' }\">\r\n      <el-row>\r\n        <span class=\"tag-title\">#{{ tagTitle }}#</span>\r\n        <el-row class=\"action\">\r\n          <span @click=\"openForm()\"> 发布帖子 </span>\r\n          <el-divider direction=\"vertical\"></el-divider>\r\n          <span v-if=\"!isJoined\" @click=\"joinTag()\"> 参与话题 </span>\r\n          <span v-else @click=\"unjoinTag()\"> 退出话题 </span>\r\n\r\n          <el-dialog title=\"发布帖子\" :visible.sync=\"formVisible\">\r\n            <el-form label-position=\"top\" :model=\"form\">\r\n              <el-form-item label=\"标题\" :label-width=\"formLabelWidth\">\r\n                <el-input\r\n                  v-model=\"form.title\"\r\n                  autocomplete=\"off\"\r\n                  maxlength=\"25\"\r\n                  show-word-limit\r\n                ></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"内容\" :label-width=\"formLabelWidth\">\r\n                <el-input\r\n                  type=\"textarea\"\r\n                  autosize\r\n                  v-model=\"form.description\"\r\n                  autocomplete=\"off\"\r\n                  minlength=\"25\"\r\n                  show-word-limit\r\n                  resize=\"none\"\r\n                ></el-input>\r\n                <el-upload\r\n                  action=\"\"\r\n                  :auto-upload=\"false\"\r\n                  :on-change=\"handleChange\"\r\n                  :before-remove=\"beforeRemove\"\r\n                  :limit=\"1\"\r\n                  accept=\"image/jpeg,image/gif,image/png,image/jpg\"\r\n                  :on-exceed=\"handleExceed\"\r\n                >\r\n                  <el-button\r\n                    class=\"form-upload-img\"\r\n                    size=\"small\"\r\n                    type=\"primary\"\r\n                  >\r\n                    <i class=\"el-icon-picture-outline-round\"></i>\r\n                    上传图片\r\n                  </el-button>\r\n                </el-upload>\r\n              </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n              <el-button class=\"button-no\" @click=\"formVisible = false\"\r\n                >取 消</el-button\r\n              >\r\n              <el-button class=\"button-yes\" @click=\"postFeed()\" v-loading.fullscreen.lock=\"fullscreenLoading\">发布</el-button>\r\n            </div>\r\n          </el-dialog>\r\n        </el-row>\r\n      </el-row>\r\n      <FeedBox\r\n        v-for=\"item in notGroupFeeds\"\r\n        :key=\"item.id\"\r\n        :initialFeedId=\"item.id\"\r\n        :initialIsInnerpage=\"false\"\r\n        :initialIsPin=\"false\"\r\n        :initialIsFeatured=\"false\"\r\n        :initialIsAdmin=\"false\"\r\n      ></FeedBox>\r\n    </div>\r\n    <Footer id=\"footer\"></Footer>\r\n    <el-backtop target=\".all\">\r\n      <i class=\"el-icon-arrow-up\" style=\"color: #456268\"></i>\r\n    </el-backtop>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Header from \"@/components/Header.vue\";\r\nimport Footer from \"@/components/Footer.vue\";\r\nimport FeedBox from \"@/components/FeedBox.vue\";\r\nimport User from \"@/store/user\";\r\n\r\nexport default {\r\n  name: \"TagInnerpage\",\r\n  components: {\r\n    Header,\r\n    Footer,\r\n    FeedBox,\r\n  },\r\n  data() {\r\n    return {\r\n      islogin: false,\r\n      fullscreenLoading: false,\r\n      count: 0,\r\n      user: \"栀子花开\",\r\n      id: \"\",\r\n      tagTitle: \"\",\r\n      isJoined: false,\r\n      formVisible: false,\r\n      formLabelWidth: \"120px\",\r\n      form: {\r\n        title: \"\",\r\n        description: \"\",\r\n        img: \"\",\r\n      },\r\n      dataList: \"\",\r\n      feeds: [],\r\n      mainMinHeight: \"\",\r\n    };\r\n  },\r\n  mounted() {\r\n    var userInfo;\r\n    if ((userInfo = User.getters.getUser(User.state()))) {\r\n      this.islogin = true;\r\n      this.userId = userInfo.user.id;\r\n    }\r\n    this.getTag();\r\n    this.getFeed();\r\n    this.mainMinHeight =\r\n      document.documentElement.clientHeight -\r\n      $(\"#header\").outerHeight(true) -\r\n      $(\"#footer\").outerHeight(true) -\r\n      6;\r\n  },\r\n  computed: {\r\n    notGroupFeeds() {\r\n      return this.feeds.filter((item) => {\r\n        return item.isPublic;\r\n      });\r\n    },\r\n  },\r\n  methods: {\r\n    handleChange(file, fileList) {\r\n      this.form.img = file.raw;\r\n      console.log(this.form.img);\r\n    },\r\n    handleExceed(files, fileList) {\r\n      this.$message.warning(\r\n        `当前限制选择 1 个文件，本次选择了 ${files.length} 个文件，共选择了 ${\r\n          files.length + fileList.length\r\n        } 个文件`\r\n      );\r\n    },\r\n    beforeRemove(file, fileList) {\r\n      return this.$confirm(`确定移除 ${file.name}？`);\r\n    },\r\n    openForm() {\r\n      if (!this.islogin) {\r\n        this.$notify({\r\n          showClose: true,\r\n          type: \"warning\",\r\n          title: \"请先登录\",\r\n          position: \"top-left\",\r\n        });\r\n        return;\r\n      }\r\n      if (!this.isJoined) {\r\n        this.$notify({\r\n          showClose: true,\r\n          type: \"warning\",\r\n          title: \"请先参与话题\",\r\n          position: \"top-left\",\r\n        });\r\n        return;\r\n      }\r\n      this.formVisible = true;\r\n    },\r\n    postFeed() {\r\n      if (!this.islogin) {\r\n        this.$notify({\r\n          showClose: true,\r\n          type: \"warning\",\r\n          title: \"请先登录\",\r\n          position: \"top-left\",\r\n        });\r\n        return;\r\n      }\r\n      if (!this.form.title) {\r\n        this.$notify({\r\n          showClose: true,\r\n          type: \"warning\",\r\n          title: \"标题不能为空\",\r\n          position: \"top-left\",\r\n        });\r\n        return;\r\n      } else if (this.form.description.length < 25) {\r\n        this.$notify({\r\n          showClose: true,\r\n          type: \"warning\",\r\n          title: \"话题内容不能少于25字\",\r\n          position: \"top-left\",\r\n        });\r\n        return;\r\n      }\r\n      this.fullscreenLoading = true;\r\n      let formData = new FormData();\r\n      formData.append(\"title\", this.form.title);\r\n      formData.append(\"description\", this.form.description);\r\n      formData.append(\"img\", this.form.img);\r\n      formData.append(\"belongTag\", this.id);\r\n\r\n      var header = {};\r\n      if (localStorage.getItem(\"token\"))\r\n        header = { Authorization: \"Bearer \" + localStorage.getItem(\"token\") };\r\n\r\n      this.$axios({\r\n        method: \"post\",\r\n        url: \"/api/v1/feed/\",\r\n        data: formData,\r\n        headers: header,\r\n      })\r\n        .then((res) => {\r\n          console.log(res);\r\n          this.formVisible = false;\r\n          this.fullscreenLoading = false;\r\n          switch (res.status) {\r\n            case 201:\r\n              this.$notify({\r\n                showClose: true,\r\n                message: \"已发表帖子\",\r\n                type: \"success\",\r\n                position: \"top-left\",\r\n              });\r\n              setTimeout(function () {\r\n                location.reload();\r\n              }, 1500);\r\n              break;\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          switch (err.response.status) {\r\n            case 400:\r\n              this.$notify({\r\n                title: \"标题和内容不能为空！\",\r\n                type: \"warning\",\r\n                position: \"top-left\",\r\n              });\r\n              break;\r\n            case 401:\r\n              this.$notify({\r\n                title: \"请先加入小组！\",\r\n                type: \"warning\",\r\n                position: \"top-left\",\r\n              });\r\n              break;\r\n          }\r\n        });\r\n    },\r\n    unjoinTag() {\r\n      let formData = new FormData();\r\n      formData.append(\"tagId\", this.id);\r\n\r\n      var header = {};\r\n      if (localStorage.getItem(\"token\"))\r\n        header = { Authorization: \"Bearer \" + localStorage.getItem(\"token\") };\r\n\r\n      this.$axios({\r\n        method: \"delete\",\r\n        url: \"/api/v1/tag/unjoin/\" + this.id,\r\n        data: formData,\r\n        headers: header,\r\n      })\r\n        .then((res) => {\r\n          console.log(res);\r\n          switch (res.status) {\r\n            case 200:\r\n              this.$notify({\r\n                showClose: true,\r\n                message: \"已退出话题\",\r\n                type: \"success\",\r\n                position: \"top-left\",\r\n              });\r\n              this.isJoined = false;\r\n              // setTimeout(function () {\r\n              //   location.reload();\r\n              // }, 1500);\r\n              break;\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    joinTag() {\r\n      let formData = new FormData();\r\n      formData.append(\"user\", this.userId);\r\n      formData.append(\"tag\", this.id);\r\n\r\n      var header = {};\r\n      if (localStorage.getItem(\"token\"))\r\n        header = { Authorization: \"Bearer \" + localStorage.getItem(\"token\") };\r\n\r\n      this.$axios({\r\n        method: \"post\",\r\n        url: \"/api/v1/tag/join/\",\r\n        data: formData,\r\n        headers: header,\r\n      })\r\n        .then((res) => {\r\n          console.log(res);\r\n          switch (res.status) {\r\n            case 201:\r\n              this.$notify({\r\n                showClose: true,\r\n                message: \"已参与话题\",\r\n                type: \"success\",\r\n                position: \"top-left\",\r\n              });\r\n\r\n              this.isJoined = true;\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          switch (err.response.status) {\r\n            case 403:\r\n              this.$notify({\r\n                title: \"请先登录\",\r\n                type: \"warning\",\r\n                position: \"top-left\",\r\n              });\r\n              break;\r\n          }\r\n        });\r\n    },\r\n    getTag() {\r\n      this.id = this.$route.params.id;\r\n\r\n      var header = {};\r\n      if (localStorage.getItem(\"token\"))\r\n        header = { Authorization: \"Bearer \" + localStorage.getItem(\"token\") };\r\n\r\n      this.$axios({\r\n        method: \"get\",\r\n        url: \"/api/v1/tag/\" + this.$route.params.id,\r\n        headers: header,\r\n      })\r\n        .then((res) => {\r\n          console.log(res);\r\n          this.tagTitle = res.data.title;\r\n          this.isJoined = res.data.isJoined;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    getFeed() {\r\n      var header = {};\r\n      if (localStorage.getItem(\"token\"))\r\n        header = { Authorization: \"Bearer \" + localStorage.getItem(\"token\") };\r\n      console.log(header);\r\n      this.$axios({\r\n        method: \"get\",\r\n        url: \"/api/v1/feed/list?tag=\" + this.$route.params.id,\r\n        headers: header,\r\n      })\r\n        .then((res) => {\r\n          console.log(res);\r\n          this.feeds = res.data.results;\r\n          console.log(this.feeds);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    getImg(event) {\r\n      console.log(\"!!!!!\");\r\n      console.log(document.querySelector(\"#imgUpload\").files[0]);\r\n      var fileName = event.target.files[0].name;\r\n      $(\".showFileName\").html(fileName);\r\n      console.log(fileName);\r\n      this.form.img = event.target.files[0];\r\n      console.log(\"get img! \", this.form);\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.el-dialog__header {\r\n  background-color: #ccd9de;\r\n}\r\n.el-dialog__title,\r\n.el-dialog__headerbtn i {\r\n  color: #456268 !important;\r\n  font-size: 24px;\r\n}\r\n.el-form-item__label {\r\n  color: #456268;\r\n  font-size: 20px;\r\n}\r\n</style>\r\n<style scoped>\r\n.button-no:hover {\r\n  background-color: rgba(121, 163, 177, 0.1);\r\n  border-color: rgba(121, 163, 177, 0.4);\r\n}\r\n.button-yes:active,\r\n.button-yes:hover {\r\n  border-color: rgba(121, 163, 177, 0.4);\r\n}\r\n.button-yes {\r\n  color: #456268;\r\n  background-color: rgba(121, 163, 177, 0.4);\r\n  border-color: transparent;\r\n}\r\n.button-no {\r\n  color: #456268;\r\n}\r\n.form-button:hover {\r\n  cursor: pointer;\r\n}\r\n.form-upload-img {\r\n  margin-top: 30px;\r\n  padding: 5px 15px;\r\n  border: none;\r\n  background-color: rgba(121, 163, 177, 0.25);\r\n  color: #456268;\r\n  border-radius: 5px;\r\n  font-size: 18px;\r\n}\r\n.showFileName {\r\n  color: #456268;\r\n  margin: 0 15px;\r\n  line-height: 26px;\r\n}\r\n#imgUpload {\r\n  display: none;\r\n}\r\n.post-now:hover {\r\n  cursor: pointer;\r\n  box-shadow: 0px 0px 10px rgba(121, 163, 177, 0.25);\r\n}\r\n.post-now {\r\n  margin-left: 45px;\r\n  padding: 10px 20px;\r\n  font-size: 22px;\r\n  /* font-weight: 600; */\r\n  color: #456268;\r\n  border: none;\r\n  border-radius: 10px;\r\n  background-color: rgba(121, 163, 177, 0.4);\r\n}\r\n\r\n.action span:hover {\r\n  cursor: pointer;\r\n  color: #79a3b1;\r\n}\r\n.action {\r\n  margin: 10px 0 30px;\r\n  font-size: 18px;\r\n  color: #456268;\r\n}\r\n.tag-title {\r\n  font-size: 24px;\r\n  font-weight: 600;\r\n  color: #456268;\r\n}\r\n.el-divider {\r\n  position: relative;\r\n  bottom: 2px;\r\n  margin: auto 15px;\r\n}\r\n#main {\r\n  width: 1200px;\r\n  margin: auto;\r\n  padding: 30px 0;\r\n  box-sizing: border-box;\r\n}\r\n.all {\r\n  height: 100vh;\r\n  overflow-x: hidden;\r\n}\r\nbutton {\r\n  font-family: \"Microsoft JhengHei\", 微软正黑体, \"Microsoft YaHei\", 微软雅黑;\r\n}\r\n#footer {\r\n  bottom: 0;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TagInnerpage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TagInnerpage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TagInnerpage.vue?vue&type=template&id=73543b67&scoped=true&\"\nimport script from \"./TagInnerpage.vue?vue&type=script&lang=js&\"\nexport * from \"./TagInnerpage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TagInnerpage.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./TagInnerpage.vue?vue&type=style&index=1&id=73543b67&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"73543b67\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","style","mainMinHeight","_v","_s","tagTitle","on","$event","openForm","isJoined","unjoinTag","joinTag","formVisible","form","formLabelWidth","model","value","callback","$$v","$set","expression","handleChange","beforeRemove","handleExceed","slot","directives","name","rawName","modifiers","postFeed","_l","item","key","id","staticStyle","staticRenderFns","components","Header","Footer","FeedBox","data","islogin","fullscreenLoading","count","user","title","description","img","dataList","feeds","mounted","userInfo","userId","getTag","getFeed","document","$","computed","notGroupFeeds","filter","isPublic","methods","file","fileList","raw","console","log","files","$message","warning","$confirm","$notify","showClose","type","position","formData","append","header","localStorage","getItem","Authorization","$axios","method","url","headers","then","message","setTimeout","location","catch","$route","params","getImg","event","querySelector","fileName","target","html","component"],"sourceRoot":""}