"use strict";(self["webpackChunkse_project"]=self["webpackChunkse_project"]||[]).push([[763],{30667:function(t,e,i){i.d(e,{Z:function(){return c}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[i("el-row",{attrs:{gutter:20,type:"flex",justify:"center"}},[i("el-col",{attrs:{span:22}},[i("div",{attrs:{id:"father"}},[i("div",{style:{transform:"translateX("+t.currentOffset+"px)"},attrs:{id:"swiper-box"}},t._l(t.showList,(function(e){return i("div",{key:e.id,staticClass:"item-box",style:{minWidth:t.width,maxWidth:t.width}},[i("div",{staticClass:"image-box"},[i("el-image",{staticClass:"poster",attrs:{src:e.thumbnail},on:{click:function(i){return t.goDetails(e.id)}}})],1),i("div",{staticClass:"title-wrap"},[i("span",{staticClass:"book-title",on:{click:function(i){return t.goDetails(e.id)}}},[t._v(" "+t._s(e.title)+" ")]),i("span",{staticClass:"rating"},[t._v(t._s(e.rating))])])])})),0),i("i",{directives:[{name:"show",rawName:"v-show",value:t.currentOffset<-5,expression:"currentOffset < -5"}],staticClass:"el-icon-arrow-left",on:{click:t.left}}),i("i",{directives:[{name:"show",rawName:"v-show",value:t.currentOffset>-854&&t.listLength>6,expression:"currentOffset > -854 && listLength>6"}],staticClass:"el-icon-arrow-right",on:{click:t.right}})])])],1)],1)},o=[],n={name:"MainpageSwiper",props:{initialList:Array,listType:String,width:{default:"16.67%"}},data:function(){return{showList:this.initialList,listLength:"",type:this.listType,currentOffset:0,boxWidth:"",fatherWith:0}},mounted:function(){this.setCardWidth(),this.listLength=this.showList.length},methods:{setCardWidth:function(){var t=document.querySelector("#father");this.fatherWith=t.clientWidth,this.boxWidth=this.fatherWith/6+"px"},right:function(){this.currentOffset<=-this.fatherWith/6*4||(this.currentOffset-=this.fatherWith/6,console.log(this.currentOffset))},left:function(){this.currentOffset>=0||(this.currentOffset+=this.fatherWith/6,console.log(this.currentOffset))},goDetails:function(t){"book"==this.listType?this.$router.push({path:"/book/detail/".concat(t)}):"movie"==this.listType&&this.$router.push({path:"/movie/detail/".concat(t)})}}},r=n,a=i(1001),l=(0,a.Z)(r,s,o,!1,null,"738b8f42",null),c=l.exports},88763:function(t,e,i){i.r(e),i.d(e,{default:function(){return d}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Header",{attrs:{id:"header"}}),i("div",{style:{"min-height":t.mainMinHeight+"px"},attrs:{id:"main"}},[t._m(0),i("el-row",{staticClass:"ctg-title"},[t._v("分类")]),i("el-row",{staticClass:"ctg-list"},[i("el-col",{staticClass:"ctg-list-type",attrs:{span:2}},[t._v("类型")]),i("el-col",{attrs:{span:18}},t._l(t.categoryList,(function(e){return i("li",{key:e.id,on:{click:function(i){return t.goFilter(e.id)}}},[t._v(" "+t._s(e.des)+" ")])})),0)],1),i("el-divider"),i("el-row",{staticClass:"ctg-title"},[t._v("热门")]),i("el-row",[t.hotBook.length?i("Swiper",{attrs:{initialList:t.hotBook,listType:"book"}}):t._e()],1),i("el-row",{staticClass:"ctg-title"},[t._v("最新上架")]),i("el-row",[t.newBook.length?i("Swiper",{attrs:{initialList:t.newBook,listType:"book"}}):t._e()],1),i("el-row",{staticClass:"ctg-title"},[t._v("爱情")]),i("el-row",[t.romanceBook.length?i("Swiper",{attrs:{initialList:t.romanceBook,listType:"book"}}):t._e()],1),i("el-row",{staticClass:"ctg-title"},[t._v("悬疑")]),i("el-row",[t.suspenseBook.length?i("Swiper",{attrs:{initialList:t.suspenseBook,listType:"book"}}):t._e()],1)],1),i("Footer",{attrs:{id:"footer"}})],1)},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-title"},[s("img",{attrs:{src:i(81160),alt:"book icon"}}),s("span",[t._v("图书")])])}],n=(i(41539),i(54747),i(56977),i(13083)),r=i(43445),a=i(30667),l={name:"BookMainpage",components:{Header:n.Z,Footer:r.Z,Swiper:a.Z},data:function(){return{categoryList:[{id:99,des:"全部"},{id:1,des:"爱情"},{id:2,des:"恐怖"},{id:3,des:"悬疑"},{id:4,des:"科幻"},{id:5,des:"艺术"},{id:6,des:"体育"},{id:7,des:"烹饪"},{id:8,des:"漫画"},{id:9,des:"教育"},{id:10,des:"哲学"},{id:11,des:"文学"},{id:0,des:"其他"}],hotBook:[],newBook:[],romanceBook:[],suspenseBook:[],mainMinHeight:""}},mounted:function(){this.getAllBook(),this.mainMinHeight=document.documentElement.clientHeight-$("#header").outerHeight(!0)-$("#footer").outerHeight(!0)-6},methods:{goFilter:function(t){this.$router.push({path:"/book/filter=category".concat(t)})},getAllBook:function(){var t=this;this.$axios.all([this.getHotBook(),this.getNewBook(),this.getRomanceBook(),this.getSuspenseBook()]).then(this.$axios.spread((function(e,i,s,o){t.hotBook=e.data.results,t.newBook=i.data.results,t.romanceBook=s.data.results,t.suspenseBook=o.data.results,t.setRating(t.hotBook),t.setRating(t.newBook),t.setRating(t.romanceBook),t.setRating(t.suspenseBook)}))).catch((function(t){console.log(t)}))},getHotBook:function(){return this.$axios({method:"get",url:"/api/v1/book/list?orderBy=r"})},getNewBook:function(){return this.$axios({method:"get",url:"/api/v1/book/list"})},getRomanceBook:function(){return this.$axios({method:"get",url:"/api/v1/book/list?category=1"})},getSuspenseBook:function(){return this.$axios({method:"get",url:"/api/v1/book/list?category=3"})},setRating:function(t){return t.forEach((function(t,e,i){i[e].rating=i[e].rating.toFixed(1)}))}}},c=l,h=i(1001),u=(0,h.Z)(c,s,o,!1,null,"e03cce86",null),d=u.exports}}]);
//# sourceMappingURL=763-legacy.a1b2fd19.js.map