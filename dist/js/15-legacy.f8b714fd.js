"use strict";(self["webpackChunkse_project"]=self["webpackChunkse_project"]||[]).push([[15],{64015:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"creategroups"},[a("Header",{attrs:{id:"header"}}),a("el-row",{style:{"min-height":e.mainMinHeight+"px"},attrs:{id:"main",type:"flex",justify:"center"}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-yellow"},[a("div",{staticClass:"profilePic"},[a("el-upload",{staticClass:"imgUpload",class:{disabled:e.uploadDisabled},attrs:{"list-type":"picture-card",action:"","auto-upload":!1,limit:1,accept:"image/jpeg,image/gif,image/png,image/jpg","on-change":e.handleChange,"on-remove":e.handleRemove,"before-upload":e.beforeAvatarUpload}},[a("i",{staticClass:"el-icon-plus"})])],1)])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-yellow"},[a("div",{staticClass:"inputBox"},[a("div",[a("span",[e._v("小组名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.gName,expression:"form.gName"}],attrs:{type:"text",placeholder:"输入小组名"},domProps:{value:e.form.gName},on:{input:function(t){t.target.composing||e.$set(e.form,"gName",t.target.value)}}})]),a("div",[a("span",[e._v("小组类型")]),a("el-radio-group",{attrs:{id:"radiogroup",fill:"rgb(252, 219, 156)"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-radio-button",{attrs:{id:"radiogroupbutton",label:"b"}},[e._v("图书")]),a("el-radio-button",{attrs:{id:"radiogroupbutton",label:"m"}},[e._v("影视")]),a("el-radio-button",{attrs:{id:"radiogroupbutton",label:"o"}},[e._v("其他")])],1)],1),a("div",[a("span",[e._v("小组简介")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.desc,expression:"form.desc"}],attrs:{id:"gDesc",placeholder:"输入小组简介(最多50字符)"},domProps:{value:e.form.desc},on:{input:function(t){t.target.composing||e.$set(e.form,"desc",t.target.value)}}})])]),a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"createGroupButton"},on:{click:e.createGroup}},[e._v("创建")])],1)])],1),a("Footer",{attrs:{id:"footer"}})],1)},i=[],r=(a(68309),a(13083)),s=a(43445),l={name:"CreateGroup",components:{Header:r.Z,Footer:s.Z},data:function(){return{uploadDisabled:!1,form:{imageUrl:"",gName:"",type:"b",desc:"",imageFile:""},mainMinHeight:"",fullscreenLoading:!1}},mounted:function(){this.mainMinHeight=document.documentElement.clientHeight-$("#header").outerHeight(!0)-$("#footer").outerHeight(!0)-6},methods:{handleChange:function(e,t){this.form.imageUrl=e.raw,this.uploadDisabled=t.length>=1,console.log(this.uploadDisabled),console.log(this.form.imageUrl)},handleRemove:function(e,t){this.uploadDisabled=t.length>=1},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/jpg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},createGroup:function(){var e=this;if(""!=this.form.gName&&""!=this.form.desc)if(this.form.gName.length>10)this.$message.warning("小组名最多10个字符");else{this.fullscreenLoading=!0;var t=new FormData;t.append("groupName",this.form.gName),t.append("description",this.form.desc),t.append("category",this.form.type),t.append("img",this.form.imageUrl);var a={};localStorage.getItem("token")&&(a={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"post",url:"/api/v1/group/create",data:t,headers:a}).then((function(t){switch(console.log(t),t.status){case 201:var a=t.data.id;e.$message({showClose:!0,message:"创建成功！",type:"success"}),e.fullscreenLoading=!1,e.$router.push({path:"/group/".concat(a)})}})).catch((function(e){console.log(e)}))}else this.$message.warning("小组名/小组简介不可为空！")},getImg:function(e){var t=e.target.files[0].name;$(".showFileName").html(t),this.form.imageFile=e.target.files[0],console.log("Get IMG",this.form.imageFile)},pickFile:function(){var e=this,t=this.$refs.fileInput,a=t.files;if(a&&a[0]){var o=new FileReader;o.onload=function(t){e.form.imageUrl=t.target.result},o.readAsDataURL(a[0]),this.$emit("input",a[0]),console.log(a)}},cancelImgUrl:function(){this.form.imageUrl="";var e=this.$refs.fileInput,t=e.files;t[0]=null,console.log(t)}}},n=l,c=a(1001),m=(0,c.Z)(n,o,i,!1,null,"9991bfa2",null),d=m.exports}}]);
//# sourceMappingURL=15-legacy.f8b714fd.js.map